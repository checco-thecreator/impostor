<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor Word</title>
    <style>
        /* --- General & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --color-primary: #8e44ad;
            --color-secondary: #9b59b6;
            --color-text: #333;
            --color-light: #f9f9f9;
            --color-white: #ffffff;
            --border-radius: 12px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #a0c4ff; /* Azzurro pastello di default */
            color: var(--color-text);
            transition: background-color 0.5s ease;
        }

        /* --- Main Container & Screens --- */
        .container {
            width: 90%;
            max-width: 450px;
            background-color: var(--color-white);
            padding: 30px 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            text-align: center;
        }

        .screen {
            display: none; /* Nascosto di default */
        }

        .screen.active {
            display: block; /* Visibile */
        }

        /* --- Typography --- */
        h1 {
            font-size: 2.5rem;
            color: var(--color-primary);
            margin-bottom: 20px;
        }

        h2 {
            font-size: 1.8rem;
            color: var(--color-secondary);
            margin-bottom: 25px;
        }

        h3 {
            margin-bottom: 15px;
            color: #555;
        }
        
        p {
            margin-bottom: 15px;
        }

        /* --- Buttons --- */
        button {
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: transform 0.2s, background-color 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: var(--color-white);
        }
        .btn-primary:hover {
            background-color: #7d3c98;
        }

        .btn-secondary {
            background-color: var(--color-light);
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
        }
        .btn-secondary:hover {
            background-color: #f1e4f7;
        }
        
        .btn-back {
            background: none;
            border: none;
            color: #888;
            font-size: 0.9rem;
            position: absolute;
            top: 20px;
            left: 20px;
            cursor: pointer;
            width: auto;
        }
        .btn-back:hover {
            color: var(--color-primary);
            transform: none;
        }

        /* --- Forms & Inputs --- */
        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .card {
            background-color: var(--color-light);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        /* --- Settings Screen --- */
        .color-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .color-swatch {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--color-white);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .color-swatch:hover {
            transform: scale(1.1);
        }

        /* --- Lobby & Role Screen --- */
        #player-list {
            list-style: none;
            padding: 0;
            margin-bottom: 25px;
        }
        #player-list li {
            background-color: var(--color-light);
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-weight: 600;
        }

        .role-card {
            background-color: #f3e5f5;
            border: 2px dashed var(--color-primary);
            padding: 20px;
            border-radius: var(--border-radius);
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .secret-word {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-primary);
            margin: 10px 0;
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- Schermata Iniziale -->
        <div id="home-screen" class="screen active">
            <h1>Impostor Word</h1>
            <p>Raduna i tuoi amici e scopri chi è l'impostore!</p>
            <button id="btn-go-to-play" class="btn-primary">Gioca</button>
            <button id="btn-go-to-settings" class="btn-secondary">Impostazioni</button>
        </div>

        <!-- Schermata Gioca (Crea/Entra) -->
        <div id="play-screen" class="screen">
            <button class="btn-back" data-target="home-screen">← Home</button>
            <h2>Entra in Partita</h2>
            
            <div class="card">
                <h3>Crea una nuova Lobby</h3>
                <div class="form-group">
                    <input type="text" id="create-nickname" placeholder="Il tuo Nickname">
                </div>
                <div class="form-group">
                    <label for="num-players">Numero Giocatori</label>
                    <select id="num-players">
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5" selected>5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="num-impostors">Numero Impostori</label>
                    <select id="num-impostors">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                    </select>
                </div>
                <button id="btn-create-lobby" class="btn-primary">Crea</button>
            </div>

            <div class="card">
                <h3>Entra in una Lobby</h3>
                 <div class="form-group">
                    <input type="text" id="join-code" placeholder="Codice Lobby">
                </div>
                <div class="form-group">
                    <input type="text" id="join-nickname" placeholder="Il tuo Nickname">
                </div>
                <button id="btn-join-lobby" class="btn-secondary">Entra</button>
            </div>
        </div>

        <!-- Schermata Impostazioni -->
        <div id="settings-screen" class="screen">
            <button class="btn-back" data-target="home-screen">← Home</button>
            <h2>Impostazioni</h2>
            <h3>Colore di Sfondo</h3>
            <div class="color-options">
                <button class="color-swatch" data-color="#a0c4ff" style="background-color: #a0c4ff;"></button> <!-- Azzurro -->
                <button class="color-swatch" data-color="#ffb3ba" style="background-color: #ffb3ba;"></button> <!-- Rosa -->
                <button class="color-swatch" data-color="#baffc9" style="background-color: #baffc9;"></button> <!-- Verde Menta -->
                <button class="color-swatch" data-color="#e1c3ff" style="background-color: #e1c3ff;"></button> <!-- Lilla -->
                <button class="color-swatch" data-color="#ffdfba" style="background-color: #ffdfba;"></button> <!-- Pesca -->
            </div>
        </div>

        <!-- Schermata Lobby -->
        <div id="lobby-screen" class="screen">
            <button class="btn-back" data-target="play-screen">← Esci</button>
            <h2>Lobby: <span id="lobby-code-display"></span></h2>
            <h3>Giocatori Connessi</h3>
            <ul id="player-list">
                <!-- I giocatori verranno aggiunti qui da JS -->
            </ul>
            <button id="btn-start-game" class="btn-primary">Inizia Partita</button>
        </div>
        
        <!-- Schermata Ruolo Giocatore -->
        <div id="role-screen" class="screen">
            <h2>Il tuo Ruolo</h2>
            <div id="role-info" class="role-card">
                <!-- Il ruolo verrà mostrato qui da JS -->
            </div>
            <button id="btn-new-game" class="btn-secondary">Nuova Partita</button>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- ELEMENTI DEL DOM ---
    const screens = document.querySelectorAll('.screen');
    const container = document.querySelector('.container');
    
    // Pulsanti di navigazione
    const btnGoToPlay = document.getElementById('btn-go-to-play');
    const btnGoToSettings = document.getElementById('btn-go-to-settings');
    const backButtons = document.querySelectorAll('.btn-back');
    const btnNewGame = document.getElementById('btn-new-game');

    // Pulsanti di azione
    const btnCreateLobby = document.getElementById('btn-create-lobby');
    const btnJoinLobby = document.getElementById('btn-join-lobby');
    const btnStartGame = document.getElementById('btn-start-game');

    // Elementi dinamici
    const lobbyCodeDisplay = document.getElementById('lobby-code-display');
    const playerList = document.getElementById('player-list');
    const roleInfo = document.getElementById('role-info');
    const colorSwatches = document.querySelectorAll('.color-swatch');

    // Stato del gioco (simulato)
    let localPlayer = {};
    const wordList = [
        // Oggetti comuni
        "Ombrello", "Astuccio", "Zaino", "Sedia", "Tavolo", "Torcia", "Lavatrice", 
        "Forchetta", "Cuscino", "Trapano", "Palla", "Costume", "Bicchiere", 
        "Pantaloni", "Spazzolino", "Panca", "Bottiglia", "Pennello", "Termometro",
        // Cibo e bevande
        "Biscotto", "Pizza", "Ghiacciolo", "Cioccolato", "Lasagna", "Arancia", 
        "Zucchina", "Uva", "Popcorn", "Panino", "Tè freddo",
        // Animali
        "Fenicottero", "Pinguino", "Delfino", "Leone", "Formica", "Pipistrello", 
        "Polpo", "Serpente", "Ippopotamo", "Scoiattolo",
        // Luoghi / viaggi
        "Aereoporto", "Passaporto", "Hotel", "Stazione", "Ascensore", "Biblioteca", 
        "Cinema", "Spiaggia", "Autogrill", "Colosseo",
        // Tecnologia e oggetti moderni
        "Cuffiette", "Tablet", "Telecomando", "Televisione", "Tastiera", "Router", 
        "Microfono", "Proiettore", "Smartphone", "Console",
        // Altro / random
        "Vulcano", "Pianoforte", "Grattacielo", "Medaglia", "Borsa", "Spazio"
    ];

    // --- FUNZIONI ---
    
    // Funzione per mostrare una schermata specifica
    function showScreen(screenId) {
        screens.forEach(screen => {
            screen.classList.remove('active');
        });
        const activeScreen = document.getElementById(screenId);
        if (activeScreen) {
            activeScreen.classList.add('active');
        }
    }
    
    // Funzione per applicare un tema
    function applyTheme(color) {
        document.body.style.backgroundColor = color;
    }
    
    // Funzione per salvare il tema
    function setTheme(color) {
        applyTheme(color);
        localStorage.setItem('impostorWordTheme', color);
    }
    
    // Carica il tema salvato all'avvio
    function loadTheme() {
        const savedTheme = localStorage.getItem('impostorWordTheme');
        if (savedTheme) {
            applyTheme(savedTheme);
        }
    }
    
    // --- LOGICA DI GIOCO (SIMULATA) ---

    function createLobby() {
        const nickname = document.getElementById('create-nickname').value.trim();
        if (!nickname) {
            alert("Per favore, inserisci un nickname!");
            return;
        }
        
        localPlayer.nickname = nickname;
        localPlayer.isHost = true;
        
        const numPlayers = parseInt(document.getElementById('num-players').value);
        const lobbyCode = Math.random().toString(36).substring(2, 6).toUpperCase();
        
        lobbyCodeDisplay.textContent = lobbyCode;
        playerList.innerHTML = ''; // Pulisce la lista
        playerList.innerHTML += `<li>${nickname} (Host)</li>`;
        
        // Simula l'aggiunta di altri giocatori fittizi per riempire la lobby
        for (let i = 1; i < numPlayers; i++) {
            playerList.innerHTML += `<li>Giocatore ${i+1}</li>`;
        }
        
        showScreen('lobby-screen');
    }
    
    function joinLobby() {
        const nickname = document.getElementById('join-nickname').value.trim();
        const code = document.getElementById('join-code').value.trim();
        
        if (!nickname || !code) {
            alert("Per favore, inserisci nickname e codice lobby!");
            return;
        }
        
        localPlayer.nickname = nickname;
        localPlayer.isHost = false;
        
        // Simulazione: si entra in una lobby già quasi piena
        lobbyCodeDisplay.textContent = code.toUpperCase();
        playerList.innerHTML = `
            <li>Giocatore Casuale 1 (Host)</li>
            <li>Giocatore Casuale 2</li>
            <li>${nickname}</li>
            <li>Giocatore Casuale 3</li>
        `;
        // In una vera app, l'host vedrebbe il pulsante "Inizia"
        btnStartGame.style.display = 'none'; // Nascondi il pulsante start per chi si unisce
        const infoMsg = document.createElement('p');
        infoMsg.textContent = "In attesa che l'host inizi la partita...";
        playerList.insertAdjacentElement('afterend', infoMsg);


        showScreen('lobby-screen');
    }

    function startGame() {
        const playersCount = playerList.getElementsByTagName('li').length;
        const numImpostors = parseInt(document.getElementById('num-impostors').value) || 1;
        
        // Scegli una parola a caso
        const secretWord = wordList[Math.floor(Math.random() * wordList.length)];
        
        // Simula l'assegnazione del ruolo per il giocatore locale
        // In questo esempio, c'è una probabilità di 1/N di essere l'impostore
        const isImpostor = Math.random() < (numImpostors / playersCount);
        
        if (isImpostor) {
            roleInfo.innerHTML = `
                <h3>Sei l'Impostore!</h3>
                <p>Non conosci la parola. Ascolta gli altri e cerca di indovinarla per mimetizzarti!</p>
            `;
        } else {
            roleInfo.innerHTML = `
                <h3>La parola segreta è:</h3>
                <p class="secret-word">${secretWord}</p>
                <p>Descrivi la parola ai tuoi compagni senza dirla esplicitamente.</p>
            `;
        }
        
        showScreen('role-screen');
    }


    // --- EVENT LISTENERS ---
    btnGoToPlay.addEventListener('click', () => showScreen('play-screen'));
    btnGoToSettings.addEventListener('click', () => showScreen('settings-screen'));
    
    backButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Ripristina la visibilità del pulsante start se si torna indietro
            btnStartGame.style.display = 'block'; 
            // Rimuovi eventuali messaggi di attesa
            const waitingMsg = container.querySelector('#lobby-screen p');
            if(waitingMsg) waitingMsg.remove();
            
            showScreen(button.dataset.target);
        });
    });

    btnCreateLobby.addEventListener('click', createLobby);
    btnJoinLobby.addEventListener('click', joinLobby);
    btnStartGame.addEventListener('click', startGame);
    btnNewGame.addEventListener('click', () => showScreen('home-screen'));

    colorSwatches.forEach(swatch => {
        swatch.addEventListener('click', () => {
            setTheme(swatch.dataset.color);
        });
    });
    
    // --- INIZIALIZZAZIONE ---
    loadTheme();
    showScreen('home-screen'); // Mostra la schermata iniziale al caricamento
});
</script>

</body>
</html>